(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var liveness=require("./liveness").getStatus,fetchHandler=require("./serviceworker"),activist={};activist.connect=function(){var e=document.getElementsByTagName("script"),t=e[e.length-1],i=t.src;navigator&&navigator.serviceWorker?navigator.serviceWorker.register(i,{scope:"/*"}).then(function(e){console.log("got worker: "+e),fetchHandler.query(navigator.serviceWorker).then(function(e){liveness(e,activist.render)})},function(e){console.error(e),activist.appCache()}):activist.appCache()},activist.appCache=function(){if(window.applicationCache.status>0)liveness([],activist.render);else{var e=document.createElement("iframe");e.src="iframe.html",e.style.display="none",document.body.appendChild(e)}},activist.serve=function(){console.log("Registering service worker."),fetchHandler.register(["fallback.html","activist.js"])},activist.render=function(e){console.log("Activist believes your connection is: ",e),"Blocked"===e&&require("./render").render()},"undefined"!=typeof document?activist.connect():activist.serve();
},{"./liveness":2,"./render":3,"./serviceworker":4}],2:[function(require,module,exports){
function interpret(t){"use strict";var e=[0,0,0],n=0,s=0;for(n=0;3>n;n+=1){for(s=0;s<results[n].length;s+=1)results[n][s]&&(e[n]+=1);e[n]/results[n].length>.5?e[n]=1:e[n]=0}return console.log("Activist.js Concensus",e),t(e[0]?"Connected":(e[1]||e[2])&&results[0].length>0?"Blocked":results[1].length>1?"Disconnected":"Pending")}function finishDispatch(){"use strict";interpret(function(t){var e;if("Pending"!==t){for(e=0;e<callbacks.length;e+=1)callbacks[e](t);callbacks=[]}})}function cleanup(t){"use strict";var e=pending.indexOf(t);e>-1&&pending.splice(e,1)}function done(t,e,n){"use strict";results[t].push(n(e.responseText)?1:0),cleanup(e),finishDispatch()}function progress(t,e,n){"use strict";n.lengthComputable&&n.loaded>0&&(results[t].push(1),e.abort(),cleanup(e),finishDispatch())}function error(t,e,n){"use strict";cleanup(e),console.warn(n),results[t].push(n.message&&n.message.contains("INVALID")?1:0),finishDispatch()}function timeout(t,e){"use strict";pending.indexOf(e)>-1&&(cleanup(e),results[t].push(0),finishDispatch())}function dispatch(t,e,n){"use strict";var s;n?(s=new XMLHttpRequest,pending.push(s),s.addEventListener("progress",progress.bind({},e,s),!1),s.addEventListener("load",done.bind({},e,s,n),!1),s.addEventListener("error",error.bind({},e,s),!1),s.timeout=waittime,s.ontimeout=timeout.bind({},e,s),s.open("HEAD",t),s.send()):(s=document.createElement("img"),s.addEventListener("load",done.bind({},e,s),!1),s.addEventListener("error",error.bind({},e,s),!1),pending.push(s),s.style.width=s.style.height=0,document&&document.body?document.head.appendChild(s):window.addEventListener("load",function(t){document.head.appendChild(t)}.bind({},s)))}function getStatus(t,e){"use strict";return run&&!callbacks.length?interpret(e):(callbacks.length||(run=!0,results[0]=t,dispatch("/activist.js?rand="+Math.random(),0,function(t){return t.indexOf("This-is-Network-Interference!")>0}),results[1]=[navigator.onLine],dispatch("https://www.google.com/favicon.ico",1,!1),dispatch("https://www.baidu.com/favicon.ico",1,!1),dispatch("https://www.yandex.ru/favicon.ico",1,!1),dispatch("https://www.bbc.co.uk/favicon.ico",1,!1),dispatch("https://www.sfr.fr/favicon.ico",1,!1),dispatch("https://www.p2pbr.com/clientinfo.js?l"+window.location.href,2,function(t){return t.indexOf("down")>-1})),void callbacks.push(e))}var waittime=1e3,run=!1,callbacks=[],pending=[],results={0:[],1:[],2:[]};exports.getStatus=getStatus;
},{}],3:[function(require,module,exports){
"use strict";exports.render=function(){var e,t=document.createElement("div"),n={display:"block",position:"fixed",background:"#d14836",color:"white",fontWeight:"700",textAlign:"center",top:0,left:0,width:"100%",padding:"10px",fontFamily:"sans-serif"};t.innerText="Your connection to this site was disrupted by your network. Consider an alternative method of access.";for(e in n)n.hasOwnProperty(e)&&(t.style[e]=n[e]);document.body.appendChild(t)};
},{}],4:[function(require,module,exports){
function register(e){"use strict";self.addEventListener("install",function(n){n.waitUntil(caches.open().then(function(n){n.addAll(e.map(function(e){return new Request(e,{mode:"no-cors"})})).then(function(){console.log("fallback ready.")})})["catch"](function(){console.warn("Registration of activist.js failed.")}))}),self.addEventListener("message",function(e){e.source.postMessage("ACTIVE!")}),self.addEventListener("fetch",function(n){n.respondWith(caches.match(n.request).then(function(t){return t?t:fetch(n.request).then(function(e){return e})["catch"](function(n){var t=new Request(e[0],{mode:"no-cors"});return caches.match(t).then(function(e){if(e)return e;throw console.warn("Failed to find preloaded fallback on error"),n})})}))})}function query(e){"use strict";return new Promise(function(n,t){e.controller.addEventListener("message",function(e){n(e.data)}),e.controller.postMessage("ping")})}exports.register=register,exports.query=query;
},{}]},{},[1]);
